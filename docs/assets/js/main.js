"use strict";const btnPreview=document.querySelector(".js-btnPreview"),namePreview=document.querySelector(".js-namePreview"),positionPreview=document.querySelector(".js-positionPreview");let imgPreview=document.querySelector(".js-imgPreview");const iconPreview=document.querySelector(".js-iconPreview"),allInputs=document.querySelector(".js_allInputs"),titleDesign=document.querySelector(".js__design"),sectionDesign=document.querySelector(".js-sectionDesign"),arrowDesign=document.querySelector(".js_arrowDesign"),sectionFill=document.querySelector(".js-sectionFill"),titleFill=document.querySelector(".js__fill"),arrowFill=document.querySelector(".js_arrowFill");let inputName=document.querySelector(".js-inputName"),inputPosition=document.querySelector(".js-inputPosition"),addImage=document.querySelector(".js-inputImage"),inputEmail=document.querySelector(".js-inputEmail"),inputPhone=document.querySelector(".js-inputPhone"),inputLinkedin=document.querySelector(".js-inputLinkedin"),inputGithub=document.querySelector(".js-inputGithub"),divImage=document.querySelector(".js__profile-image");const contentShareOne=document.querySelector(".js__content_shareOne"),titleShare=document.querySelector(".js__share"),arrowShare=document.querySelector(".js_arrowShare"),btnShare=document.querySelector(".js-btnShare"),contentShareTwo=document.querySelector(".js__content-shareTwo"),palette1=document.querySelector(".js-palette1"),palette2=document.querySelector(".js-palette2"),palette3=document.querySelector(".js-palette3"),allRadio=document.querySelectorAll(".js-palette"),cardContainer=document.querySelector(".js-card__container"),sectionUrl=document.querySelector(".js-section-url"),messageCard=document.querySelector(".js-messageCard"),linkTwitter=document.querySelector(".js-twitter-link"),handleClick=e=>{const t=e.currentTarget;t.classList.contains("js__design")?(sectionDesign.classList.toggle("hidden"),arrowDesign.classList.toggle("arrow-translate"),sectionFill.classList.add("hidden"),contentShareOne.classList.add("hidden"),arrowFill.classList.add("arrow-translate"),arrowShare.classList.add("arrow-translate")):t.classList.contains("js__fill")?(sectionFill.classList.toggle("hidden"),arrowFill.classList.toggle("arrow-translate"),sectionDesign.classList.add("hidden"),contentShareOne.classList.add("hidden"),arrowDesign.classList.add("arrow-translate"),arrowShare.classList.add("arrow-translate")):t.classList.contains("js__share")&&(contentShareOne.classList.toggle("hidden"),arrowShare.classList.toggle("arrow-translate"),sectionFill.classList.add("hidden"),sectionDesign.classList.add("hidden"),arrowFill.classList.add("arrow-translate"),arrowDesign.classList.add("arrow-translate"))};titleDesign.addEventListener("click",handleClick),titleFill.addEventListener("click",handleClick),titleShare.addEventListener("click",handleClick);const data={palette:1,name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:""},linkPhone=document.querySelector(".js_link_phone"),linkEmail=document.querySelector(".js_link_email"),linkLinkedin=document.querySelector(".js_link_linkedin"),linkGithub=document.querySelector(".js_link_github"),saveData=e=>{localStorage.setItem("localData",JSON.stringify(e))};function previewCard(e){""===e.name?namePreview.innerHTML="Nombre Apellido":namePreview.innerHTML=e.name,""===e.job?positionPreview.innerHTML="Front-end developer":positionPreview.innerHTML=e.job,linkPhone.href="tel:"+e.phone,linkLinkedin.href="https://www."+e.linkedin,linkGithub.href="https://github.com/"+e.github.slice(1),linkEmail.href="mailto:"+e.email,saveData(e)}const handleInput=e=>{const t=e.target.name,a=e.target.value;data[t]=a,previewCard(data),saveData(data)};allInputs.addEventListener("keyup",handleInput);const paintPalette=e=>{cardContainer.classList.remove("palette1","palette2","palette3"),cardContainer.classList.add("palette"+e);document.querySelector(".js-palette"+e).checked=!0},handleRadio=e=>{const t=parseInt(e.currentTarget.value);data.palette=t,paintPalette(t)};for(const e of allRadio)e.addEventListener("click",handleRadio);const clearPreview=()=>{data.palette=1,data.name="",data.job="",data.phone="",data.email="",data.linkedin="",data.github="",data.photo="",cardContainer.classList.add("palette1"),cardContainer.classList.remove("palette2"),cardContainer.classList.remove("palette3")},clearInput=()=>{inputName.value="",inputPosition.value="",inputEmail.value="",inputPhone.value="",inputLinkedin.value="",inputGithub.value="",profileImage.style.backgroundImage="url()",profilePreview.style.backgroundImage='url("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTil9_c3PpcUTAx2vmHH6srdREmI1X8474m3Q&usqp=CAU")'},clearStorage=()=>{localStorage.clear()},handleReset=e=>{e.preventDefault(),data.palette=1,data.name="",data.job="",data.phone="",data.email="",data.linkedin="",data.github="",data.photo="",cardContainer.classList.add("palette1"),cardContainer.classList.remove("palette2"),cardContainer.classList.remove("palette3"),inputName.value="",inputPosition.value="",inputEmail.value="",inputPhone.value="",inputLinkedin.value="",inputGithub.value="",profileImage.style.backgroundImage="url()",profilePreview.style.backgroundImage='url("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTil9_c3PpcUTAx2vmHH6srdREmI1X8474m3Q&usqp=CAU")',previewCard(data),localStorage.clear()};btnPreview.addEventListener("click",handleReset),console.log(data);const loadData=()=>{let e=JSON.parse(localStorage.getItem("localData"));e&&(console.log(e),data.name=e.name,data.job=e.job,data.email=e.email,data.phone=e.phone,data.linkedin=e.linkedin,data.github=e.github,data.palette=e.palette,data.photo=e.photo,paintPalette(e.palette),previewCard(data),inputName.value=e.name,inputPosition.value=e.job,inputEmail.value=e.email,inputPhone.value=e.phone,inputLinkedin.value=e.linkedin,inputGithub.value=e.github,imgPreview.style.backgroundImage=`url('${e.photo}')`,divImage.style.backgroundImage=`url('${e.photo}')`)};loadData();const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,data.photo=fr.result}function shareCard(){data.github=data.github.slice(1),data.linkedin=data.linkedin.slice(16),fetch("https://awesome-profile-cards.herokuapp.com/card",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(data)}).then(e=>e.json()).then(e=>{e.success?(sectionUrl.innerHTML=e.cardURL,sectionUrl.href=e.cardURL,console.log(e),linkTwitter.href="https://twitter.com/intent/tweet?text=%C2%A1I%20have%20done%20my%20contact%20card!&url="+sectionUrl.href,localStorage.setItem("cardStoraged",JSON.stringify(e.cardURL))):(messageCard.innerHTML="",messageCard.innerHTML="Debe rellenar todos los campos")})}fileField.addEventListener("change",getImage);const handleClickBtn=e=>{e.preventDefault(),contentShareTwo.classList.remove("hidden"),btnShare.classList.add("btn-share-grey"),shareCard()};btnShare.addEventListener("click",handleClickBtn);